<html>
	<head>
		<title>Zeiger auf Variablen</title>
		<link rel="stylesheet" href="jmksf.css" type="text/css"></link>
	</head>

	<body>
		<div id="top">
			<img src="rb5.png" alt="RapidBATCH Logo" />
			Zeiger auf Variablen
		</div>
		
		<div class="line">&nbsp;</div>
		
		Bei unseren bisherigen Beispielen mit Prozeduren haben wir schon oft mit Parametern gearbeitet. Dabei haben wir bisher nur das &quot;Call-By-Value&quot;-Verfahren angewandt, d.h. einen einzelnen Wert an eine lokale Variable der Prozedur &uuml;bergeben. Bei diesem Verfahren kann aber nur intern innerhalb der aufgerufenen Prozedur mit diesen Werten gearbeitet werden, d.h. sie sind nicht ver&auml;nderbar, ausserdem lassen sich somit keine Arrays an Prozeduren &uuml;bergeben. Zu diesem Zwecke gibt es das &quot;Call-by-Reference&quot;-Verfahren, bei dem man einer Prozedur als Parameter nicht den Inhalt der Variablen &uuml;bergibt, sondern eine lokale &quot;Pseudo-Variable&quot;, die dann auf die eigentliche Variable zeigt. Diese &quot;Pseudo-Variablen&quot; heiﬂen Pointer, weil sie auf einen Speicherbereich, eben die Ziel-Variable, zeigen. &Uuml;ber solch einen Pointer kann man auf Variablen (und nat&uuml;rlich auch auf Arrays) uneingeschr&auml;nkt zugreifen, d.h. Werte lesen und schreiben. Obwohl der Pointer eine lokale Variable ist, kann man &uuml;ber diesen globale Variablen oder auch die lokalen Variablen einer Prozedur ver&auml;ndern, welche die Prozedur mit dem Pointer aufgerufen hat. Es kommt ganz darauf an, worauf der Pointer zeigt.<br /><br />Ein Parameter wird bei der Prozedurdeklaration mit einem Sternchen (*) beginnend als Pointer deklariert. Folgendes Beispiel-Script zeigt, wie man einen Pointer in einer Prozedur deklariert, &uuml;bergibt und verwendet:<br /><br /><!-- code BEGIN --><div class="code"><b>proc</b> neuer_wert: <font color="#000080">[*a]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;echo <font color="#0000ff">'Der Wert von [a] ist '</font> # <font color="#000080">[a]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[a]</font> = <font color="#0000ff">'Das ist der neue Wert, der &uuml;ber den Pointer geschrieben wurde'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;echo <font color="#0000ff">'Der Wert von [a] ist jetzt '</font> # <font color="#000080">[a]</font><br /><b>endproc</b><br /><br /><font color="#000080">[test]</font> = <font color="#0000ff">'Hello World'</font><br />echo <font color="#0000ff">'Der Wert von [test] ist '</font> # <font color="#000080">[test]</font><br />neuer_wert <font color="#000080">[test]</font><br />echo <font color="#0000ff">'Der Wert von [test] ist jetzt '</font> # <font color="#000080">[test]</font><br /><b>end</b></div><!-- code END-->Pointer sind auch die einzige M&ouml;glichkeit, ein Array in einer Prozedur zu verarbeiten. Bestes Beispiel ist die Prozedur &quot;viewArray&quot; aus der RapidBATCH-Bibliothek ARRAY.RB.<br /><br /><!-- code BEGIN --><div class="code"><font color="#808080">rem Prozedur viewArray zur Anzeige eines Arrays</font><br /><b>proc</b> viewArray: <font color="#000080">[*array]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>dec</b> <font color="#000080">[i]</font>, <font color="#000080">[text]</font><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b> <font color="#000080">[array:'0']</font> = <font color="#0000ff">'0'</font> <b>ret</b><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>repeat</b><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[i]</font> + <font color="#0000ff">'1'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[text]</font> # <font color="#0000ff">'Index '</font> # <font color="#000080">[i]</font> # <font color="#0000ff">': '</font> # <font color="#000080">[array[i]]</font> # <font color="#000080">[new_line]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>until</b> <font color="#000080">[i]</font> = <font color="#000080">[array:'0']</font><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo <font color="#000080">[text]</font><br /><b>endproc</b><br /><br /><font color="#808080">rem Array erzeugen</font><br /><font color="#000080">[namen:'1']</font> = <font color="#0000ff">'Jan'</font><br /><font color="#000080">[namen:'2']</font> = <font color="#0000ff">'Anna'</font><br /><font color="#000080">[namen:'3']</font> = <font color="#0000ff">'Stefan'</font><br /><font color="#000080">[namen:'4']</font> = <font color="#0000ff">'Matthias'</font><br /><font color="#000080">[namen:'5']</font> = <font color="#0000ff">'Sebastian'</font><br /><font color="#000080">[namen:'6']</font> = <font color="#0000ff">'Daniel'</font><br /><font color="#000080">[namen:'7']</font> = <font color="#0000ff">'Uli'</font><br /><font color="#000080">[namen:'8']</font> = <font color="#0000ff">'Andreas'</font><br /><font color="#000080">[namen:'9']</font> = <font color="#0000ff">'Volker'</font><br /><font color="#000080">[namen:'10']</font> = <font color="#0000ff">'Marco'</font><br /><br /><font color="#808080">rem Array anzeigen</font><br />viewarray <font color="#000080">[namen]</font><br /><b>end</b></div><!-- code END-->Nat&uuml;rlich k&ouml;nnen auch die Werte eines Arrays beliebig ver&auml;ndert werden. Folgendes Script quadriert jeden Eintrag eines Arrays und schreibt ihn in das Array selbst zur&uuml;ck.<br /><br /><!-- code BEGIN --><div class="code"><font color="#808080">rem Prozedur viewArray zur Anzeige eines Arrays</font><br /><b>proc</b> viewArray: <font color="#000080">[*array]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>dec</b> <font color="#000080">[i]</font>, <font color="#000080">[text]</font><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b> <font color="#000080">[array:'0']</font> = <font color="#0000ff">'0'</font> <b>ret</b><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>repeat</b><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[i]</font> + <font color="#0000ff">'1'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[text]</font> # <font color="#0000ff">'Index '</font> # <font color="#000080">[i]</font> # <font color="#0000ff">': '</font> # <font color="#000080">[array[i]]</font> # <font color="#000080">[new_line]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>until</b> <font color="#000080">[i]</font> = <font color="#000080">[array:'0']</font><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo <font color="#000080">[text]</font><br /><b>endproc</b><br /><br /><font color="#808080">rem Prozedur array_zum_quadrat quadriert jeden Eintrag eines Arrays</font><br /><b>proc</b> array_zum_quadrat: <font color="#000080">[*array]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>dec</b> <font color="#000080">[i]</font>, <font color="#000080">[text]</font><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b> <font color="#000080">[array:'0']</font> = <font color="#0000ff">'0'</font> <b>ret</b><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>repeat</b><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[i]</font> + <font color="#0000ff">'1'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000080">[array:[i]]</font> * <font color="#000080">[array:[i]]</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<b>until</b> <font color="#000080">[i]</font> = <font color="#000080">[array:'0']</font><br /><b>endproc</b><br /><br /><font color="#808080">rem Array erzeugen</font><br /><font color="#000080">[zahlen:'1']</font> = <font color="#0000ff">'5'</font><br /><font color="#000080">[zahlen:'2']</font> = <font color="#0000ff">'7'</font><br /><font color="#000080">[zahlen:'3']</font> = <font color="#0000ff">'2'</font><br /><font color="#000080">[zahlen:'4']</font> = <font color="#0000ff">'3'</font><br /><font color="#000080">[zahlen:'5']</font> = <font color="#0000ff">'9'</font><br /><br /><font color="#808080">rem Werte ausgeben</font><br />viewarray <font color="#000080">[zahlen]</font><br /><br /><font color="#808080">rem Alle Werte im Array quadrieren</font><br />array_zum_quadrat <font color="#000080">[zahlen]</font><br /><br /><font color="#808080">rem Werte ausgeben</font><br />viewarray <font color="#000080">[zahlen]</font><br /><b>end</b></div><!-- code END-->Ein Pointer kann auch als Pointer an eine weitere Prozedur &uuml;bergeben werden. In diesem Fall w&uuml;rde RapidBATCH &uuml;ber einen Pointer auf einen Pointer auf eine Variable zugreifen! Theoretisch k&ouml;nnte solch eine Kette von Pointern bis ins Unendliche fortgef&uuml;hrt werden.<br /><br />

		<div class="line">&nbsp;</div>

		<div id="copyright">
			Copyright &copy; 2000-2006 by J.M.K S.F. Software Technologies, Jan Max Meyer<br />
			All rights reserved.
		</div>
	</body>
</html>
